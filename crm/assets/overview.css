/*
 * Styles specific to the CRM Overview page. These classes follow the naming
 * conventions used in the provided example and aim to integrate smoothly
 * with the existing CRM theme. The components include KPI cards, responsive
 * grid layouts, charts containers, tables with status pills, and gauge
 * elements. Dark mode support is inherited from the parent .fw-crm[data-theme="dark"]
 * attribute, which is toggled by the existing CRM JS.
 */

/* Colour variables and gradients for the overview page */
:root {
  --ov-card-bg-light: linear-gradient(180deg, #ffffff 0%, #f9f9fb 100%);
  --ov-card-bg-dark: linear-gradient(180deg, #161c2a 0%, #121721 100%);
  --ov-card-shadow: 0 6px 14px rgba(0, 0, 0, 0.05);
  --ov-card-hover-shadow: 0 12px 24px rgba(0, 0, 0, 0.08);
  --ov-kpi-icon-gradient: linear-gradient(135deg, var(--fw-accent, #ff3a8c), #ffa6c9);
  --ov-kpi-icon-dark-gradient: linear-gradient(135deg, #2d3650, #1b2235);

  /* Accent palettes for KPI cards. These colour stops are inspired by
     Tailwind's vibrant hues and allow each KPI to have its own gradient.
     They cascade to nth‑child selectors further down. */
  --ov-accent-1-start: #60a5fa; /* blue-400 */
  --ov-accent-1-end: #3b82f6;   /* blue-500 */
  --ov-accent-2-start: #34d399; /* emerald-400 */
  --ov-accent-2-end: #10b981;   /* emerald-500 */
  --ov-accent-3-start: #fbbf24; /* amber-400 */
  --ov-accent-3-end: #f59e0b;   /* amber-500 */
  --ov-accent-4-start: #f472b6; /* pink-400 */
  --ov-accent-4-end: #ec4899;   /* pink-500 */
}

.fw-container {
  /* Extra top padding to separate the cards from the tabs above */
  padding: 32px 18px 18px;
  position: relative;
}

/* Decorative abstract background for the overview page. This pseudo-element uses
   an image generated by the design assistant and applies a blur. It sits
   behind the content to add depth without distraction. */
.fw-container::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url('/crm/assets/overview-bg.png');
  background-size: cover;
  background-position: center;
  opacity: 0.18;
  filter: blur(60px);
  z-index: -1;
}

/* In dark mode the decorative overlay should be subtler */
.fw-crm[data-theme="dark"] .fw-container::before {
  opacity: 0.12;
}

.fw-page-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 14px;
}

.fw-head-actions {
  display: flex;
  gap: 10px;
  align-items: center;
}

/* Buttons and selects reuse global tokens but ensure consistent styling on Overview */
.fw-btn {
  border: 0;
  padding: 8px 12px;
  border-radius: 10px;
  background: var(--fw-accent, #ff3a8c);
  color: #fff;
  cursor: pointer;
}

.fw-btn-outline {
  background: transparent;
  border: 1px solid var(--fw-border, #e7e7e9);
  color: var(--fw-text, #111);
}

.fw-select {
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid var(--fw-border, #e7e7e9);
  background: #fff;
}

/* Responsive grids */
/* Increased spacing between grid items for a more premium feel */
.fw-grid {
  display: grid;
  gap: 24px;
}

.fw-grid-4 {
  grid-template-columns: repeat(4, minmax(0, 1fr));
}

.fw-grid-3 {
  grid-template-columns: 2fr 2fr 1.6fr;
}

.fw-grid-2 {
  grid-template-columns: 1fr 1fr;
}

@media (max-width: 1200px) {
  .fw-grid-4 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
  .fw-grid-3 {
    grid-template-columns: 1fr;
  }
  .fw-grid-2 {
    grid-template-columns: 1fr;
  }
}

/* Generic card styling */
/* Cards with gradient backgrounds, softer shadows and subtle hover lift */
.fw-card {
  background: var(--ov-card-bg-light);
  border: 1px solid var(--fw-border, #e5e7eb);
  border-radius: 20px;
  padding: 18px;
  box-shadow: var(--ov-card-shadow);
  transition: box-shadow 0.2s ease, transform 0.2s ease;
  backdrop-filter: blur(2px);
}

.fw-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--ov-card-hover-shadow);
}

/* Dark mode overrides using data-theme attribute on the root .fw-crm container.
   The CRM theme toggler sets data-theme="dark" on .fw-crm, so target that
   instead of a generic .dark class. */
.fw-crm[data-theme="dark"] .fw-card {
  background: var(--ov-card-bg-dark);
  border-color: #1e2230;
}

.fw-card-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.fw-card-head h3 {
  margin: 0;
  font-size: 16px;
}

/* KPI card layout */
.kpi {
  display: flex;
  align-items: center;
  gap: 12px;
  position: relative;
}

/* KPI icons: larger size and vibrant gradient backgrounds */
.kpi-icon {
  width: 50px;
  height: 50px;
  border-radius: 14px;
  display: grid;
  place-items: center;
  background: var(--ov-kpi-icon-gradient);
  color: #fff;
  font-size: 22px;
  transition: transform 0.2s ease;
}

.fw-crm[data-theme="dark"] .kpi-icon {
  background: var(--ov-kpi-icon-dark-gradient);
  color: var(--fw-accent, #ff3a8c);
}

.kpi-main {
  flex: 1;
}

/* Larger KPI values for emphasis */
.kpi-value {
  font-size: 24px;
  font-weight: 700;
  line-height: 1.2;
  transition: color 0.2s ease;
}

/* Slightly larger label text for readability */
.kpi-label {
  color: #6b7280;
  font-size: 13px;
  letter-spacing: 0.25px;
}

/* KPI delta styling */
.kpi-delta {
  position: absolute;
  bottom: 8px;
  right: 12px;
  font-size: 12px;
  color: var(--fw-accent, #10b981);
  font-weight: 500;
}

/* Assign unique gradients and text colours to each KPI card using nth‑child.
   This gives every metric its own personality without requiring extra markup. */
.fw-grid-4 > .kpi:nth-child(1) .kpi-icon,
/* When KPI cards are inside the custom .kpi-row, apply the same accent gradients */
.kpi-row > .kpi:nth-child(1) .kpi-icon {
  background: linear-gradient(135deg, var(--ov-accent-1-start), var(--ov-accent-1-end));
}
.fw-grid-4 > .kpi:nth-child(1) .kpi-value,
.kpi-row > .kpi:nth-child(1) .kpi-value {
  color: var(--ov-accent-1-end);
}
.fw-grid-4 > .kpi:nth-child(2) .kpi-icon,
.kpi-row > .kpi:nth-child(2) .kpi-icon {
  background: linear-gradient(135deg, var(--ov-accent-2-start), var(--ov-accent-2-end));
}
.fw-grid-4 > .kpi:nth-child(2) .kpi-value,
.kpi-row > .kpi:nth-child(2) .kpi-value {
  color: var(--ov-accent-2-end);
}
.fw-grid-4 > .kpi:nth-child(3) .kpi-icon,
.kpi-row > .kpi:nth-child(3) .kpi-icon {
  background: linear-gradient(135deg, var(--ov-accent-3-start), var(--ov-accent-3-end));
}
.fw-grid-4 > .kpi:nth-child(3) .kpi-value,
.kpi-row > .kpi:nth-child(3) .kpi-value {
  color: var(--ov-accent-3-end);
}
.fw-grid-4 > .kpi:nth-child(4) .kpi-icon,
.kpi-row > .kpi:nth-child(4) .kpi-icon {
  background: linear-gradient(135deg, var(--ov-accent-4-start), var(--ov-accent-4-end));
}
.fw-grid-4 > .kpi:nth-child(4) .kpi-value,
.kpi-row > .kpi:nth-child(4) .kpi-value {
  color: var(--ov-accent-4-end);
}
/* Add a subtle hover effect on KPI cards to make them feel alive. */
.kpi:hover .kpi-icon {
  transform: scale(1.1);
}

/* Tables */
.fw-table-wrap {
  overflow: auto;
}

.fw-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
}

.fw-table thead th {
  text-align: left;
  font-size: 12px;
  color: #6b7280;
  position: sticky;
  top: 0;
  background: #fff;
}

.fw-crm[data-theme="dark"] .fw-table thead th {
  background: #12141a;
}

.fw-table tr + tr td {
  border-top: 1px solid var(--fw-border, #eee);
}

.fw-table td,
.fw-table th {
  padding: 10px;
}

.fw-table-compact td {
  padding: 8px 10px;
}

/* Status pill styles */
.pill {
  padding: 4px 8px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 600;
  display: inline-block;
}

.pill--open {
  background: #fff7ed;
  color: #c2410c;
  border: 1px solid #fed7aa;
}

.pill--paid {
  background: #ecfdf5;
  color: #065f46;
  border: 1px solid #a7f3d0;
}

.pill--late {
  background: #fef2f2;
  color: #991b1b;
  border: 1px solid #fecaca;
}

/* Gauge component styles */
.rv-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.rv-gauges {
  display: flex;
  justify-content: space-between;
  gap: 8px;
}

.rv-gauge {
  flex: 1;
  text-align: center;
  /* Soft tinted backgrounds for gauge boxes, tinted with the CRM accent. The
     colour is subtle but noticeable. */
  background: linear-gradient(135deg, rgba(6, 182, 212, 0.1), rgba(6, 182, 212, 0.05));
  border: 1px solid var(--fw-border, #eee);
  border-radius: 12px;
  padding: 10px;
}

.fw-crm[data-theme="dark"] .rv-gauge {
  /* Use a subtle tint of the CRM accent colour for dark mode gauges to give
     them definition without overwhelming the dark background. */
  background: linear-gradient(135deg, rgba(6, 182, 212, 0.2), rgba(6, 182, 212, 0.1));
  border-color: #1e2230;
}

.rv-gauge-value {
  font-size: 18px;
  font-weight: 800;
}

.rv-gauge-label {
  font-size: 12px;
  color: #6b7280;
}

/* Utility link styling */
.fw-link {
  font-size: 12px;
  color: var(--fw-accent, #ff3a8c);
  text-decoration: none;
}

.fw-link:hover {
  text-decoration: underline;
}

/* -------------------------------------------------------------------- */
/*  Dashboard-specific layout
    The overview tab now arranges KPI cards, charts and analytics in
    multiple rows to more closely mirror the provided admin dashboard
    example. The first row divides the screen into a KPI section and a
    visitor insights chart. Subsequent rows display three cards side by
    side. These classes complement the existing grid system and remain
    responsive for narrower viewports. */

/* First row: four KPI cards on the left and a visitor insights chart on the right */
.dashboard-row {
  display: grid;
  gap: 24px;
  grid-template-columns: 2fr 1fr;
  margin-bottom: 24px;
}

/* The KPI row wraps four KPI cards in a responsive grid */
.kpi-row {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 24px;
}

/* Second and third rows: three cards per row */
.chart-row-1,
.chart-row-2 {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 24px;
  margin-bottom: 24px;
}

/* Responsive adjustments: collapse the dashboard rows on smaller screens */
@media (max-width: 1200px) {
  .dashboard-row {
    grid-template-columns: 1fr;
  }
  /* Show two KPI cards per row when there isn't enough space */
  .dashboard-row > .kpi-row {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
  .chart-row-1,
  .chart-row-2 {
    grid-template-columns: 1fr;
  }
}